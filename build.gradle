group 'net.andreho'
version projectVersion

buildscript {
  repositories {
    mavenCentral()
    maven { url "https://plugins.gradle.org/m2" }
  }
  dependencies {
    classpath 'org.junit.platform:junit-platform-gradle-plugin:1.0.0-M4'
  }
}

allprojects {

  apply plugin: 'java'
  apply plugin: 'maven'
  apply plugin: 'maven-publish'
  apply plugin: 'org.junit.platform.gradle.plugin'

  sourceCompatibility = org.gradle.api.JavaVersion.VERSION_1_8
  targetCompatibility = org.gradle.api.JavaVersion.VERSION_1_8
  [compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

  junitPlatform {
    // enableStandardTestTask true
    // selectors (optional)
    // filters (optional)
  }

  repositories {
    mavenLocal()
    mavenCentral()
  }

  dependencies {
    testRuntime "junit:junit:4.12"
    testCompile "org.junit.jupiter:junit-jupiter-api:5.0.0-M4"
    testCompile "org.junit.jupiter:junit-jupiter-engine:5.0.0-M4"
    testCompile "org.junit.jupiter:junit-jupiter-params:5.0.0-M4"
    testCompile "org.junit.vintage:junit-vintage-engine:4.12.0-M4"
    testCompile 'org.assertj:assertj-core:3.6.1'
  }

  task sourceJar(type: Jar) {
    from sourceSets.main.allJava
  }

  publishing {
    publications {
      mavenJava(MavenPublication) {
        from components.java

        artifact sourceJar {
          classifier "sources"
        }
      }
    }
  }
}


